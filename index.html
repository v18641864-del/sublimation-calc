<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#d4af37"/>
<title>Sublimation Calc</title>
<style>
body{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial;margin:0;background:#0b0b0c;color:#fff}
.header{background:linear-gradient(90deg,#111,#222);padding:18px 16px;display:flex;align-items:center;gap:12px}
.logo{width:48px;height:48px;border-radius:8px;background:#d4af37;display:flex;align-items:center;justify-content:center;color:#111;font-weight:700}
.container{padding:18px}
.card{background:#111;border-radius:12px;padding:14px;margin-bottom:12px;box-shadow:0 6px 18px rgba(0,0,0,0.6)}
.row{display:flex;gap:8px;flex-wrap:wrap}
.input{flex:1;min-width:120px}
label{font-size:12px;color:#ccc}
input,select{width:100%;padding:8px;border-radius:8px;border:1px solid #222;background:#070707;color:#fff}
.result{font-size:22px;font-weight:700;margin-top:8px}
.note{font-size:12px;color:#aaa;margin-top:6px}
.small{font-size:13px;color:#ddd}
.footer{padding:12px;text-align:center;color:#999;font-size:12px}
.btn{background:#d4af37;color:#111;padding:10px 14px;border-radius:10px;border:none;font-weight:700}
</style>
</head>
<body>
<header class="header">
  <div class="logo">ZH</div>
  <div>
    <div style="font-weight:700">Sublimation Calc</div>
    <div style="font-size:12px;color:#ccc">Быстро вычислить цену по размерам</div>
  </div>
</header>
<main class="container">
  <div class="card">
    <div class="row">
      <div class="input">
        <label>Режим</label>
        <select id="mode">
          <option value="single">Одинарная панель</option>
          <option value="modular">Модульная (несколько панелей)</option>
        </select>
      </div>
      <div class="input">
        <label>Ширина (см)</label>
        <input type="number" id="width" value="30" min="1">
      </div>
      <div class="input">
        <label>Высота (см)</label>
        <input type="number" id="height" value="40" min="1">
      </div>
    </div>

    <div id="modarea" style="display:none;margin-top:10px" class="row">
      <div class="input">
        <label>Колонки</label>
        <input type="number" id="cols" value="2" min="1">
      </div>
      <div class="input">
        <label>Строки</label>
        <input type="number" id="rows" value="2" min="1">
      </div>
    </div>

    <div style="margin-top:10px" class="row">
      <button id="calc" class="btn">Посчитать</button>
      <button id="share" class="btn" style="background:#333;color:#fff">Скопировать цену</button>
    </div>

    <div id="out" class="card" style="margin-top:12px">
      <div class="small">Результат</div>
      <div id="price" class="result">— тг</div>
      <div id="note" class="note"></div>
      <div id="details" class="small"></div>
    </div>
  </div>

  <div class="card small">
    <div style="font-weight:700">Быстрая шпаргалка</div>
    <div>До 25×25 — 10–15 тыс · 30×30 — 18 тыс · 30×40 — 20 тыс · 40×60 — 40 тыс</div>
  </div>

  <div class="card small">
    <div style="font-weight:700">Инструкция установки</div>
    <ol>
      <li>Открой этот сайт в Chrome на Android.</li>
      <li>В меню Chrome выбери «Добавить на главный экран» / Install.</li>
      <li>Открой приложение с иконки — работает офлайн.</li>
    </ol>
  </div>

</main>
<footer class="footer">© Sublimation Calc — для бизнеса Жулдыз</footer>

<script>
const standard = [
  {w:21,h:30,price:12000,label:"A4 21×30"},
  {w:30,h:42,price:22000,label:"A3 30×42"},
  {w:30,h:45,price:25000,label:"A3+ 30×45"},
  {w:40,h:50,price:33000,label:"40×50"},
  {w:40,h:60,price:40000,label:"40×60"},
  {w:20,h:20,price:10000,label:"20×20"},
  {w:25,h:25,price:14000,label:"25×25"},
  {w:30,h:30,price:18000,label:"30×30"},
  {w:35,h:35,price:22000,label:"35×35"},
  {w:40,h:40,price:28000,label:"40×40"},
  {w:50,h:50,price:38000,label:"50×50"},
  {w:60,h:60,price:50000,label:"60×60"},
  {w:20,h:30,price:11000,label:"20×30"},
  {w:25,h:35,price:15000,label:"25×35"},
  {w:30,h:40,price:20000,label:"30×40"},
  {w:30,h:50,price:26000,label:"30×50"},
  {w:30,h:60,price:32000,label:"30×60"},
  {w:35,h:50,price:32000,label:"35×50"},
  {w:35,h:60,price:38000,label:"35×60"},
  {w:50,h:60,price:45000,label:"50×60"}
];

function findStandard(w,h){
  const tol = 1.2;
  for(const s of standard){
    if((Math.abs(s.w-w)<=tol && Math.abs(s.h-h)<=tol) || (Math.abs(s.w-h)<=tol && Math.abs(s.h-w)<=tol)){
      return s;
    }
  }
  return null;
}

function calcPanelPrice(w,h){
  const std = findStandard(w,h);
  if(std) return {price:std.price, note:"Стандартный формат: "+std.label};
  const area = w*h;
  const baseRate = 70;
  let price = area * baseRate;
  if(price < 10000) price = 10000;
  price = Math.round(price * 1.2 / 1000) * 1000;
  return {price, note:"Нестандартный размер — расчёт по площади ("+Math.round(area)+" см²)"};
}

function calculate(){
  const mode = document.getElementById("mode").value;
  const w = parseFloat(document.getElementById("width").value) || 0;
  const h = parseFloat(document.getElementById("height").value) || 0;
  if(mode==="single"){
    const res = calcPanelPrice(w,h);
    return {panels:1, panelPrice:res.price, total:res.price, note:res.note, w,h};
  } else {
    const cols = Math.max(1,parseInt(document.getElementById("cols").value)||1);
    const rows = Math.max(1,parseInt(document.getElementById("rows").value)||1);
    const count = cols*rows;
    const res = calcPanelPrice(w,h);
    const total = Math.round(res.price * count * 1.2 / 1000) * 1000;
    return {panels:count, panelPrice:res.price, total, note:"Модуль: "+count+" панелей, +20% на композицию", w,h};
  }
}

document.getElementById("mode").addEventListener("change", e=>{
  document.getElementById("modarea").style.display = e.target.value==="modular" ? "flex" : "none";
});

document.getElementById("calc").addEventListener("click", ()=>{
  const r = calculate();
  document.getElementById("price").innerText = r.total.toLocaleString()+" тг";
  document.getElementById("note").innerText = r.note;
  document.getElementById("details").innerText = "Панель: "+r.w+"×"+r.h+" см — "+r.panelPrice.toLocaleString()+" тг · Кол-во панелей: "+r.panels;
});

document.getElementById("share").addEventListener("click", ()=>{
  const r = calculate();
  const txt = `Цена: ${r.total} тг · ${r.panels}×${r.w}×${r.h}см`;
  navigator.clipboard && navigator.clipboard.writeText(txt);
  alert("Цена скопирована: "+txt);
});
</script>
</body>
</html>
